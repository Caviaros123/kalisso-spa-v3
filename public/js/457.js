"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[457],{2638:(t,e,n)=>{n.d(e,{Z:()=>i});var s=n(1519),a=n.n(s)()((function(t){return t[1]}));a.push([t.id,".otp-input{border:1px solid rgba(0,0,0,.3);border-radius:4px;box-shadow:0 .5rem 1rem rgb(0 0 0/10%)!important;font-size:20px;height:40px;margin:0 8px;padding:5px;text-align:center;width:40px}.otp-input:focus-visible{border-color:crimson}.otp-input::-webkit-inner-spin-button,.otp-input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.error{border:1px solid red!important}",""]);const i=a},4457:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var s=n(7765);n(8481);const a={props:{phoneNumber:{type:String}},data:function(){return{phone:this.phoneNumber||"+242064272080",endAt:(new Date).getTime()+12e4,startAt:(new Date).getTime(),serverError:"",successMessage:"",componentKey:0,user:null,otp:null,smsSent:!1,recaptchaVerifier:null,recaptchaWidgetId:null,confirmResult:null,appVerifier:""}},mounted:function(){s.Z.auth().useDeviceLanguage(),this.initRecaptha()},methods:{resendOtpCode:function(){this.startAt=(new Date).getTime(),this.endAt=(new Date).getTime()+6e4,this.componentKey+=1,this.initRecaptha()},startCallBack:function(t){console.log(t)},endCallBack:function(t){console.log(t)},handleOnComplete:function(t){this.otp=t,this.verifyOtp()},handleOnChange:function(t){console.log("OTP changed: ",t)},handleClearInput:function(){this.$refs.otpInput.clearInput()},initRecaptha:function(){var t=this;window.recaptchaVerifier=new s.Z.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){t.$toast.warning({title:"Verification",message:"Nous avons vérifier que vous n'êtespas un robot"})},"expired-callback":function(){t.$toast.warning({title:"Verification Expiré",message:"La vérificaton a expiré, veuillez recharger cette page"})}}),recaptchaVerifier.render(),this.appVerifier=window.recaptchaVerifier,this.sendOtp()},sendOtp:function(){var t=this;s.Z.auth().signInWithPhoneNumber(this.phone,this.appVerifier).then((function(e){window.confirmationResult=e,t.$toast.info({title:"SMS Envoyé",message:"Vous allez recevoir un SMS de confirmation"})})).catch((function(e){t.$toast.error({title:"Erreur d'envoi du SMS",message:e.message})}))},verifyOtp:function(){var t=this,e=t.otp;window.confirmationResult.confirm(e).then((function(e){t.$toast.success({title:"Félicitations",message:"Vous êtes inscrit à Kalisso.com"}),t.$router.push({name:"login"})})).catch((function(e){t.$toast.error({title:"Erreur de vérification",message:e.message}),alert(e.message)}))}}};var i=n(3379),r=n.n(i),o=n(2638),c={insert:"head",singleton:!1};r()(o.Z,c);o.Z.locals;const l=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("section",{staticClass:"section-content padding-y-xs",staticStyle:{"min-height":"16vh"}},[n("div",{staticClass:"mx-auto padding-y-md",staticStyle:{"max-width":"380px","margin-top":"6%"},attrs:{align:"center"}},[n("router-link",{attrs:{to:{name:"home"}}},[n("img",{staticClass:"center-block w-50 padding-y img-fluid",attrs:{src:"/images/logo.png",alt:"Logo Kalisso"}})])],1),t._v(" "),t.successMessage?n("div",{staticClass:"alert alert-success text-center m-2"},[t._v("\n      "+t._s(t.successMessage)+"\n    ")]):t._e(),t._v(" "),t.serverError?n("div",{staticClass:"alert alert-danger text-center m-2"},[t._v("\n      "+t._s(t.serverError)+"\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"card mx-auto",staticStyle:{"max-width":"380px","margin-top":"10px"},attrs:{id:"inputOtp"}},[n("div",{staticClass:"card-body",attrs:{align:"center"}},[n("i",{staticClass:"fa text-danger fa-sms fa-3x"}),t._v(" "),n("h5",{staticClass:"card-title"},[t._v("Vérification du Téléphone")]),t._v(" "),n("small",[t._v("Nous avons envoyez un code par SMS au ")]),t._v(" "),n("h5",{staticClass:"mb-4"},[t._v(t._s(t.phone))]),t._v(" "),n("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.verify.apply(null,arguments)}}},[n("div",{staticClass:"form-group"},[n("v-otp-input",{attrs:{inputClasses:"otp-input",numInputs:6,isInputNum:!0,separator:" ",shouldAutoFocus:!0},on:{"on-complete":t.handleOnComplete,"on-change":t.handleOnChange}})],1),t._v(" "),n("div",{staticClass:"small mt-4"},[n("vue-countdown-timer",{key:t.componentKey,attrs:{"start-time":t.endAt,"end-time":t.endAt,interval:1e3,"start-label":"Renvoi du code de vérification dans","end-label":"Until end:","label-position":"begin","end-text":"Renvoyer le code","day-txt":"","hour-txt":"","minutes-txt":"","seconds-txt":"s"},on:{start_callback:function(e){return t.startCallBack("event started")},end_callback:function(e){return t.endCallBack("event ended")}},scopedSlots:t._u([{key:"start-label",fn:function(e){return[""!==e.props.startLabel&&e.props.tips&&"begin"===e.props.labelPosition?n("span",{staticStyle:{color:"red"}},[t._v(t._s(e.props.startLabel)+":")]):t._e(),t._v(" "),""===e.props.endLabel||e.props.tips||"begin"!==e.props.labelPosition?t._e():n("span",{staticStyle:{color:"blue"}},[t._v(t._s(e.props.endLabel)+":")])]}},{key:"countdown",fn:function(e){return[n("span",{staticClass:"b h7"},[t._v(t._s(e.props.seconds))]),n("i",[t._v(t._s(e.props.secondsTxt))])]}},{key:"end-label",fn:function(e){return[""!==e.props.startLabel&&e.props.tips&&"end"===e.props.labelPosition?n("span",{staticClass:"mt-4",staticStyle:{color:"red"}},[t._v(t._s(e.props.startLabel)+":")]):t._e(),t._v(" "),""===e.props.endLabel||e.props.tips||"end"!==e.props.labelPosition?t._e():n("span",{staticStyle:{color:"blue"}},[t._v(t._s(e.props.endLabel)+":")])]}},{key:"end-text",fn:function(e){return[n("a",{staticClass:"btn-link text-danger",attrs:{href:"#"},on:{click:function(e){return t.resendOtpCode()}}},[n("i",{staticClass:"fa fa-redo"}),t._v(" "+t._s(e.props.endText)+"\n                ")])]}}])}),t._v(" "),n("div",{attrs:{id:"recaptcha-container"}})],1)])])]),t._v(" "),n("p",{staticClass:"text-center mt-4"},[t._v("\n      Vous n'avez pas de compte?\n      "),n("router-link",{attrs:{to:{name:"register"},href:"#"}},[t._v("Inscrivez-vous ici")])],1),t._v(" "),n("br"),n("br")])])}),[],!1,null,null,null).exports}}]);